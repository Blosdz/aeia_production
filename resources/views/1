
<style>
.plans{
    display:flex;
}
.sel {
    color:white;
    width: 250px;
    min-height: 40px;
    box-sizing: border-box;
    background-color: #09114a;
    overflow: hidden;
}
.txt {
    padding: 10px;
    background-color:#09114a;
}
.selected {
    background-color: #31A9B9;
}
.hide {
    display: none;
}
.sel .options {
    width: 250px;
    /* background-color: #66f7FB; */
}
.sel .options div {
    transition: all 0.2s ease-out;
    padding: 10px;
}
.sel .options div:hover {
    background-color: #31A9B9;
}
.bor{
    border: 1px solid black;
}
.card-edit{
    display:flex;
}
</style>
@extends('layouts.app')

@section('content')
<div class="container-fluid">
    <div class="animated fadeIn">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <div class="card-edit">
                            <div class="col-md-2">
                                <h3>
                                    Balance General
                                    ${{$totalPayment}} <br>
                                </h3>
                            </div>                      
                            <div class="plans">
                                @foreach($groupedPayments as $planId=>$payments)
                                    @if($planId == 1)
                                        <div class="sel">
                                            <div class="txt">Revisa tus Contratos</div>
                                            <div class="options hide">
                                                @foreach($payments as $index => $pay)
                                                    <div class="mx-1 px-2 bor" style="background-color: #ff8a00;">
                                                        <div class="row col-12">
                                                            <span>Bronce</span>
                                                        </div>
                                                        <br>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>number</span>
                                                        </div>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>${{$pay->total}}</span>
                                                        </div>
                                                    </div>
                                                @endforeach
                                            </div>
                                        </div>
                                    @elseif($planId==2)
                                        <div class="sel">
                                            <div class="txt">Revisa tus Contratos</div>
                                            <div class="options hide">
                                                @foreach($payments as $index => $pay)
                                                    <div class="mx-1 px-2" style="background-color: #969a9b;">
                                                        <div class="row col-12">
                                                            <span>Plata</span>
                                                        </div>
                                                        <br>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>number</span>
                                                        </div>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>${{$pay->total}}</span>
                                                        </div>
</span>
                                                        </div>
                                                    </div>
                                                @endforeach
                                            </div>
                                        </div>
                                    @elseif($planId==3)
                                        <div class="sel">
                                            <div class="txt">Revisa tus Contratos</div>
                                            <div class="options hide">
                                                @foreach($payments as $index => $pay)
                                                    <div class="mx-1 px-2" style="background-color: #EFB810;">
                                                        <div class="row col-12">
                                                            <span>oro</span>
                                                        </div>
                                                        <br>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>number</span>
                                                        </div>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>${{$pay->total}}</span>
                                                        </div>
                                                    </div>
                                                @endforeach
                                            </div>
                                        </div>
                                    @elseif($planId==4)
                                        <div class="sel2">
                                            <div class="txt">Revisa tus Contratos</div>
                                            <div class="options hide">
                                                @foreach($payments as $index => $pay)
                                                    <div class="mx-1 px-2" style="background-color: #696969;">
                                                        <div class="row col-12">
                                                            <span>Platino</span>
                                                        </div>
                                                        <br>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>number</span>
                                                        </div>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>${{$pay->total}}</span>
                                                        </div>
                                                    </div>
                                                @endforeach
                                            </div>
                                        </div>                                        
                                    @elseif($planId==5)
                                        <div class="sel">
                                            <div class="txt">Revisa tus Contratos</div>
                                            <div class="options hide">
                                                @foreach($payments as $index => $pay)
                                                    <div class="mx-1 px-2" style="background-color: #26cbf7;">
                                                        <div class="row col-12">
                                                            <span>Plata</span>
                                                        </div>
                                                        <br>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>number</span>
                                                        </div>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>${{$pay->total}}</span>
                                                        </div>
                                                    </div>
                                                @endforeach
                                            </div>
                                        </div>                                    
                                    @elseif($planId==6)
                                        <div class="sel">
                                            <div class="txt">Revisa tus Contratos</div>
                                            <div class="options hide">
                                                @foreach($payments as $index => $pay)
                                                    <div class="mx-1 px-2" style="background-color: #88b6ec;">
                                                        <div class="row col-12">
                                                            <span>Plata</span>
                                                        </div>
                                                        <br>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>number</span>
                                                        </div>
                                                        <div class="row col-12">
                                                            <i class="mdi mdi-account"></i>&nbsp;
                                                            <span>${{$pay->total}}</span>
                                                        </div>
                                                    </div>
                                                @endforeach
                                            </div>
                                        </div>
                                    @endif
                                @endforeach
                            </div>
                        </div>                      
                    </div>                      
                    <!--img src="https://1.bp.blogspot.com/-XSxfK5DgJe4/YLfZqxQcxOI/AAAAAAAAa0A/InIY1Qp5h3019QtGpvTjXGnLwYgrmUCBgCLcBGAsYHQ/s1282/Multiple%2BCharts.PNG" alt="" width="1100" /-->
                    <div class="w-100 text-center my-3">
                            <button class="btn btn-outline-warning mx-2">Historial de balance</button>
                            <button class="btn btn-outline-primary mx-2">Ver todas las posiciones</button>
                    </div>
                    <canvas id="myChart" width="100%" height="30vh"></canvas>
                </div>                      
            </div>                      
        </div>                      
    </div>                      
</div>                      

<script>
document.querySelectorAll('.sel').forEach(function(sel) {
    const txt = sel.querySelector('.txt');
    const options = sel.querySelector('.options');

    sel.addEventListener('click', function (e) {
        e.stopPropagation();
        options.classList.toggle('hide');
    });

    sel.addEventListener('mouseleave', function (e) {
        options.classList.add('hide');
    });

    options.querySelectorAll('div').forEach(function(option) {
        option.addEventListener('click', function (e) {
            e.stopPropagation();
            txt.textContent = option.textContent;
            option.classList.add('selected');
            option.parentElement.querySelectorAll('div').forEach(function(sibling) {
                if(sibling !== option) {
                    sibling.classList.remove('selected');
                }
            });
            options.classList.add('hide');
        });
    });
});

const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Diciembre','2021','Enero', '2022','Febrero', '2022','Marzo', '2022', 'Abril', '2022'],
            datasets: [{
                data: [100,150, 220, 300, 200, 500,40,120,400,420],
            }]
        },
        options: {
            plugins: {
                legend:{
                    display:false
                }
            }
        }
    });
</script>

@endsection

